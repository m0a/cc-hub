# CC Hub ダッシュボード UI モックアップ

## デバイス対応

- **プライマリ**: タブレット横向き（1024x768）
- **セカンダリ**: スマートフォン縦向き（375x812）

---

## 0. リミット警告カード（最重要・最上部に配置）

### 警告状態（リミット接近時）
```
┌─────────────────────────────────────────────────────────────────────────┐
│  ⚠️ リミット警告                                                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  🔴 Opus 4 週間リミット                                         │    │
│  │                                                                 │    │
│  │  使用: 28.5h / 35h (81%)  ████████████████░░░░                  │    │
│  │  残り: 6.5h                                                     │    │
│  │                                                                 │    │
│  │  📈 現在のペース: 4.2h/日                                       │    │
│  │  ⚠️ 予測: 1日12時間後にリミット到達                             │    │
│  │  🔄 リセット: 3日後（2/3 月曜 9:00）                            │    │
│  │                                                                 │    │
│  │  💡 提案: Sonnetに切り替えると週末まで使えます                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  🟡 5時間サイクル                                               │    │
│  │                                                                 │    │
│  │  使用: 33 / 200 プロンプト (16%)  ███░░░░░░░░░░░░░░░░░          │    │
│  │  残り: 167 プロンプト                                           │    │
│  │  リセット: 2時間15分後                                          │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 危険状態（リミット直前）
```
┌─────────────────────────────────────────────────────────────────────────┐
│  🚨 リミット間近！                                              [×閉じる]│
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ████████████████████████████████████████░░  Opus 4: 残り 2.1h        │
│                                                                         │
│   現在のペースだと 3時間後 にリミット到達                               │
│   リミット後は 2日間 Opus 4 が使用不可になります                        │
│                                                                         │
│   [Sonnetに切り替え]  [ペースを落とす]  [詳細を見る]                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### モバイル版（コンパクト表示）
```
┌─────────────────────────┐
│  ⚠️ Opus残り 6.5h       │
│  ████████████████░░░░   │
│  あと1日12時間で到達    │
│  リセット: 3日後        │
│  [詳細]                 │
└─────────────────────────┘
```

### 正常状態（余裕がある時）
```
┌─────────────────────────────────────────────────────────────────────────┐
│  ✅ リミット状況                                        [⚙️ Max 20x ▼] │
├─────────────────────────────────────────────────────────────────────────┤
│  Opus 4:   12.3h / 35h  ███████░░░░░░░░░░░░░  35%   リセット: 5日後    │
│  Sonnet 4: 45.2h / 280h ███░░░░░░░░░░░░░░░░░  16%   リセット: 5日後    │
│  5hサイクル: 33 / 200   ███░░░░░░░░░░░░░░░░░  16%   リセット: 2h15m    │
└─────────────────────────────────────────────────────────────────────────┘
```

### プラン表示（自動検出）
```
┌─────────────────────────────────────┐
│  🔑 プラン: Max 20x (自動検出)      │
│                                     │
│  ソース: ~/.claude/.credentials.json│
│  - subscriptionType: max            │
│  - rateLimitTier: claude_max_20x    │
│                                     │
│  [手動で変更]                       │
└─────────────────────────────────────┘
```

### プラン別リミット表

| プラン | 5hサイクル | 週間Sonnet | 週間Opus |
|--------|-----------|-----------|----------|
| Free/Pro | 10-40 | 40-80h | - |
| Max 5x | 50-200 | 140-280h | 15-35h |
| Max 20x | 200-800 | 240-480h | 24-40h |

---

## 1. ダッシュボード概要画面（新規）

タブレット/モバイル共通のトップページ。

### タブレット横向き
```
┌─────────────────────────────────────────────────────────────────────────┐
│  CC Hub                                      [統計] [セッション] [設定]  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────┐  ┌─────────────────────────────────┐  │
│  │  📊 今日の使用量            │  │  💰 今月の推定コスト            │  │
│  │                             │  │                                 │  │
│  │  メッセージ: 1,234          │  │       $12.50                    │  │
│  │  セッション: 8              │  │                                 │  │
│  │  ツールコール: 456          │  │  Opus: $10.20  Sonnet: $2.30    │  │
│  └─────────────────────────────┘  └─────────────────────────────────┘  │
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  📈 過去7日間のアクティビティ                    [7日] [30日] [全]│  │
│  │                                                                   │  │
│  │   1500 ┤                                                          │  │
│  │   1000 ┤            ██                                            │  │
│  │    500 ┤  ██  ██    ██  ██         ██    ██                       │  │
│  │      0 ┼──────────────────────────────────────────────────────    │  │
│  │        月   火   水   木   金   土   日                           │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  🔄 アクティブセッション (3)                                       │  │
│  ├───────────────────────────────────────────────────────────────────┤  │
│  │  🟢 cchub - ダッシュボード機能追加...       main    5分前    [開く]│  │
│  │  🟡 lifestyle-app - API修正待ち...         feat/api  20分前  [開く]│  │
│  │  ⚪ rakugaki-map - 完了                    main    2時間前  [再開]│  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### モバイル縦向き
```
┌─────────────────────────┐
│  CC Hub            [≡]  │
├─────────────────────────┤
│                         │
│  ┌─────────────────────┐│
│  │ 📊 今日             ││
│  │ 1,234 メッセージ    ││
│  │ 8 セッション        ││
│  └─────────────────────┘│
│                         │
│  ┌─────────────────────┐│
│  │ 💰 今月 $12.50      ││
│  │ ████████░░ Opus     ││
│  │ ██░░░░░░░░ Sonnet   ││
│  └─────────────────────┘│
│                         │
│  ─── アクティブ (3) ─── │
│                         │
│  ┌─────────────────────┐│
│  │ 🟢 cchub            ││
│  │ ダッシュボード...   ││
│  │ main   5分前  [開く]││
│  └─────────────────────┘│
│                         │
│  ┌─────────────────────┐│
│  │ 🟡 lifestyle-app    ││
│  │ API修正待ち...      ││
│  │ feat   20分前 [開く]││
│  └─────────────────────┘│
│                         │
│  ┌─────────────────────┐│
│  │ ⚪ rakugaki-map     ││
│  │ 完了               ││
│  │ main   2h前   [再開]││
│  └─────────────────────┘│
│                         │
└─────────────────────────┘
```

---

## 2. 統計詳細画面

### タブレット横向き
```
┌─────────────────────────────────────────────────────────────────────────┐
│  ← 統計                                            期間: [今月 ▼]       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  📈 日別アクティビティ                                          │    │
│  │                                                                 │    │
│  │   2000 ┤                    ████                                │    │
│  │   1500 ┤        ████        ████                                │    │
│  │   1000 ┤  ████  ████  ████  ████  ████        ████              │    │
│  │    500 ┤  ████  ████  ████  ████  ████  ████  ████  ████        │    │
│  │      0 ┼──────────────────────────────────────────────────      │    │
│  │         1/1  1/5  1/10 1/15 1/20 1/25 1/30                      │    │
│  │                                                                 │    │
│  │  [■ メッセージ] [■ セッション] [■ ツールコール]                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────┐  ┌─────────────────────────────────┐  │
│  │  🕐 時間帯ヒートマップ     │  │  🤖 モデル使用量               │  │
│  │                             │  │                                 │  │
│  │   0  3  6  9 12 15 18 21   │  │      ┌───────────┐              │  │
│  │  ░░░░░░░░████████████░░░░  │  │      │   Opus    │  82%         │  │
│  │  ▓▓= 高い  ░░= 低い        │  │      │   4.2M tk │              │  │
│  │                             │  │      └───────────┘              │  │
│  │                             │  │        Sonnet 18% (900K tk)     │  │
│  └─────────────────────────────┘  └─────────────────────────────────┘  │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  💰 推定コスト内訳                                    合計: $52 │    │
│  ├─────────────────────────────────────────────────────────────────┤    │
│  │  Opus Input          1.0M tokens    ×  $15/MTok  =    $15.00    │    │
│  │  Opus Output         4.2M tokens    ×  $75/MTok  =    $31.50    │    │
│  │  Opus Cache Read   3.3B tokens      ×  $1.5/MTok =     $4.95    │    │
│  │  Sonnet Input        0.2M tokens    ×   $3/MTok  =     $0.60    │    │
│  │  ...                                                            │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 3. セッション一覧画面（強化版）

### タブレット横向き
```
┌─────────────────────────────────────────────────────────────────────────┐
│  ← セッション                [🔍 検索...              ] [フィルタ ▼]   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │ ● アクティブ                                                      │  │
│  ├───────────────────────────────────────────────────────────────────┤  │
│  │                                                                   │  │
│  │  🟢 処理中  cchub                                                 │  │
│  │  ├─ 「ダッシュボード機能追加について調べて...」                   │  │
│  │  ├─ main ブランチ  │  32 msg  │  45分                            │  │
│  │  └─ [ターミナルを開く]                                            │  │
│  │                                                                   │  │
│  │  🟡 入力待ち  lifestyle-app                                       │  │
│  │  ├─ 「APIのエラーハンドリングを修正して」                         │  │
│  │  ├─ AskUserQuestion: 「どの方法で実装しますか？」                 │  │
│  │  ├─ feat/api-fix ブランチ  │  18 msg  │  1時間                    │  │
│  │  └─ [回答する]  [ターミナルを開く]                                │  │
│  │                                                                   │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │ ○ 終了済み（今日）                                                │  │
│  ├───────────────────────────────────────────────────────────────────┤  │
│  │                                                                   │  │
│  │  ⚪ rakugaki-map                                           [再開] │  │
│  │  ├─ 「地図上にピンを追加する機能を実装」                          │  │
│  │  └─ main  │  45 msg  │  2時間前  │  完了                         │  │
│  │                                                                   │  │
│  │  ⚪ health-tracker                                         [再開] │  │
│  │  ├─ 「カレンダーUIのバグ修正」                                    │  │
│  │  └─ fix/calendar  │  12 msg  │  5時間前  │  完了                  │  │
│  │                                                                   │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │ ○ 終了済み（昨日）                                   [もっと見る] │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. 状態インジケーター詳細

### 色と意味

| 状態 | アイコン | 色 | 説明 |
|------|---------|-----|------|
| 処理中 | 🟢 | 緑（パルス） | Claudeが応答生成中 |
| 入力待ち | 🟡 | 黄 | AskUserQuestion/Plan承認待ち |
| アイドル | 🔵 | 青 | ユーザー入力待ち |
| 完了 | ⚪ | グレー | セッション終了 |
| エラー | 🔴 | 赤 | エラー発生 |

### 待機状態の詳細表示
```
┌─────────────────────────────────────┐
│  🟡 入力待ち                        │
│                                     │
│  待機ツール: AskUserQuestion        │
│  質問: 「どの実装方法を選びますか？」│
│                                     │
│  選択肢:                            │
│  [1] Redux を使用                   │
│  [2] Context API を使用             │
│  [3] Zustand を使用                 │
│                                     │
│  [回答する]                         │
└─────────────────────────────────────┘
```

---

## 5. 再開ダイアログ

```
┌─────────────────────────────────────┐
│  セッションを再開                   │
├─────────────────────────────────────┤
│                                     │
│  📂 rakugaki-map                    │
│  🌿 main ブランチ                   │
│  📝 「地図上にピンを追加する...」   │
│  ⏱️  終了: 2時間前                  │
│                                     │
│  このセッションを再開しますか？     │
│  新しいターミナルタブで開きます。   │
│                                     │
│  [キャンセル]           [再開する]  │
│                                     │
└─────────────────────────────────────┘
```

---

## 6. ナビゲーション構造

```
CC Hub
├── ダッシュボード (概要)
│   ├── 今日の使用量カード
│   ├── 推定コストカード
│   ├── アクティビティグラフ
│   └── アクティブセッション一覧
│
├── 統計
│   ├── 日別アクティビティグラフ
│   ├── 時間帯ヒートマップ
│   ├── モデル使用量チャート
│   └── コスト内訳テーブル
│
├── セッション
│   ├── アクティブセッション
│   ├── 終了済みセッション（日別グループ）
│   └── 検索・フィルタ
│
└── 設定（既存）
```

---

## 7. コンポーネント設計

### 新規コンポーネント

```
frontend/src/components/
├── dashboard/
│   ├── DashboardPage.tsx        # ダッシュボード概要画面
│   ├── TodayStatsCard.tsx       # 今日の使用量カード
│   ├── CostCard.tsx             # 推定コストカード
│   ├── ActivityChart.tsx        # 日別アクティビティグラフ
│   └── ActiveSessionsList.tsx   # アクティブセッション一覧
│
├── stats/
│   ├── StatsPage.tsx            # 統計詳細画面
│   ├── HourlyHeatmap.tsx        # 時間帯ヒートマップ
│   ├── ModelUsageChart.tsx      # モデル使用量ドーナツ
│   └── CostBreakdown.tsx        # コスト内訳テーブル
│
├── sessions/
│   ├── SessionCard.tsx          # セッションカード（強化版）
│   ├── StatusIndicator.tsx      # 状態インジケーター
│   ├── ResumeDialog.tsx         # 再開確認ダイアログ
│   └── SessionFilters.tsx       # フィルタUI
│
└── charts/
    ├── BarChart.tsx             # 汎用棒グラフ
    ├── DonutChart.tsx           # ドーナツチャート
    └── Heatmap.tsx              # ヒートマップ
```

---

## 8. 技術選定

### グラフライブラリ候補

| ライブラリ | サイズ | モバイル対応 | 推奨度 |
|-----------|--------|-------------|-------|
| **Recharts** | 50KB | ◎ | ★★★ |
| Chart.js | 60KB | ○ | ★★ |
| Victory | 80KB | ◎ | ★★ |
| D3 (自作) | 30KB | △ | ★ |

**推奨**: Recharts（React親和性高い、レスポンシブ対応良好）
