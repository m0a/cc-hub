# Changelog

All notable changes to this project will be documented in this file.

## [0.0.27] - 2026-02-07

### Performance

- **Sessions API レイテンシ 48.6%削減** (70.84ms → 36.39ms)
  - `capture-pane`の重複呼び出しを統合（2回→1回/セッション）
  - `ps`コマンドをバッチ化（N回→1回で全TTYのClaude検出・プロセス状態チェック）
  - `listSessions` 2秒TTLキャッシュ追加
  - TTY→SessionIDマッピング 10秒TTLキャッシュ追加
  - フロントエンド`useSessions`のfetchリクエスト重複排除

- **ターミナルWebSocketホットパス最適化**
  - デバッグhexログを除去（毎キーストロークで`Array.from`+`map`+`join`+`console.log`が走っていた）
  - PTY切断時に30秒の猶予期間を追加（タブレットのスリープ復帰時に即座再接続）

### Added

- **ターミナルレイテンシベンチマークスイート** (`backend/tests/benchmark/`)
  - Single char echo RTT、コマンド実行RTT、スループット、Sessions APIの4メトリクス計測
  - p95/p99パーセンタイル統計

## [0.0.26] - 2026-02-06

### Added
- **オンボーディングウォークスルー** - 初回ユーザー向けスポットライト式ガイド
  - デスクトップ/タブレット/モバイル各デバイス対応
  - キーボード操作、分割ペイン、セッション一覧の使い方を順に説明
  - `beforeAction`パターンで説明前にUIを自動操作（キーボード表示など）

- **ターミナルリフレッシュ機能** - 表示崩れ時の軽量リカバリー
  - WebSocket経由で`tmux refresh-client -S`を送信
  - WebSocket再接続時に自動リフレッシュ

- **ペインごとの分割ボタン** - デスクトップモードで各ペインヘッダーに分割ボタンを配置

### Changed
- **ハンバーガーメニュー削除** - DesktopLayoutのサイドパネルオーバーレイを廃止（PaneContainer内のセッション一覧サイドバーに統合）
- **サイドバーリサイズハンドル改善** - 透明なオーバーレイ方式に変更、タッチ領域拡大（タブレット24px）
- **サイドバーがターミナル端に被さるレイアウト** - xterm文字幅端数による隙間を軽減
- **タブナビゲーション自動フィット** - フォントサイズ縮小+truncateで狭いパネルでも1行表示
- **リロードボタンをページ全体リロードに変更**

### Fixed
- モバイルターミナルスクロールの不自然な挙動（閾値調整、二重スクロール解消）
- モバイルでキーボードオンボーディングが表示されない問題
- オンボーディングツールチップがナビゲーションバーに隠れる問題
- ペースト時にclipboard.readが空を返す際のフォールバック改善
- 履歴一覧で長いプロジェクトパスが折り返される問題

## [0.0.25] - 2026-02-05

### Added
- **CLI国際化対応**: バックエンド/CLIメッセージの日本語・英語対応
  - 環境変数 `LANG`/`LC_ALL`/`LC_MESSAGES` から言語を自動検出
  - 日本語ロケール (`ja_*`) → 日本語出力、それ以外 → 英語出力
  - シングルバイナリ対応のため翻訳データを埋め込み

### Changed
- CLAUDE.md に国際化（i18n）セクションを追加

## [0.0.24] - 2026-02-05

### Added
- **フロントエンド国際化対応**: react-i18nextによる完全なi18n対応
  - 全UIコンポーネントの日本語・英語翻訳
  - i18next-browser-languagedetectorによるブラウザ言語自動検出
  - 言語切替ボタン（EN/JA）をUIに追加
  - 設定は localStorage (`cchub-language`) に保存
  - 翻訳ファイル: `frontend/src/i18n/locales/{en,ja}.json`

### Changed
- ダッシュボードのステータスメッセージをフロントエンドで生成（翻訳対応）
- 全コンポーネントのハードコードされた日本語を翻訳キーに置換

## [0.0.23] - 2026-02-05

### Added
- **会話履歴の検索機能**
  - 履歴タブに検索ボックスを追加
  - プロジェクト名とユーザーメッセージで検索
  - インクリメンタルサーチ（SSEストリーミング）
  - 全文検索対応（全ユーザーメッセージを検索）
  - マッチ箇所のスニペット表示

## [0.0.22] - 2026-02-05

### Added
- **VSCode風ツリービューファイラー**
  - ディレクトリを展開/折りたたみで表示
  - サブディレクトリの遅延読み込み
  - 深さに応じたインデント表示

- **ファイラーのペインリサイズ機能**
  - 左右ペイン間のディバイダーをドラッグでリサイズ可能
  - マウス/タッチ両対応

- **テキスト選択機能**
  - Markdownプレビューでテキスト選択可能
  - 会話ビューアでテキスト選択可能

### Fixed
- 会話ビューアで画像が表示されない問題
  - 認証不要の画像エンドポイント `/api/images/` を追加
- HTMLプレビューの定期リフレッシュ問題
  - blob URLをメモ化してiframe再読み込みを防止
- ファイラー表示時にキーボードが前面に出る問題
  - キーボードのz-indexを調整
- デスクトップでの日本語IME入力が正しく動作しない問題

## [0.0.21] - 2026-02-05

### Added
- **セッション色テーマ機能**
  - セッションごとに色テーマを設定可能（9色 + なし）
  - セッション一覧で長押し → 色選択メニュー表示
  - ターミナル背景色がテーマに応じて変化
  - 設定は `~/.cchub/session-themes.json` に永続化

- **会話ビューアの改善**
  - システム生成サマリーを「System (Summary)」として区別表示
  - 琥珀色のスタイルで実際のユーザーメッセージと区別

### Changed
- **モバイルキーボード改善**
  - タップ/長押しでカスタムキーボードを表示
  - OSソフトキーボードの起動を防止
  - xterm内部textareaに`inputmode="none"`を設定

### Fixed
- モバイルでセッションテーマ変更が即座に反映されない問題

## [0.0.20] - 2026-02-05

### Added
- **パスワード認証機能**
  - `-P`オプションでサーバー起動時にパスワード認証を有効化
  - 全APIエンドポイントに条件付き認証ミドルウェアを適用
  - WebSocket接続時のトークン認証
  - フロントエンドにログインフォーム追加

- **HTMLファイルプレビュー**
  - ファイルビューアでHTMLファイルをiframeでプレビュー表示

- **開発用コマンド**
  - `bun run dev:auth` - パスワード認証付きで開発環境起動（パスワード: devpass）

### Security
- JWT認証によるAPIアクセス制御
- WebSocketトークン検証
- `authFetch`ヘルパーで認証付きAPI呼び出しを一元化

## [0.0.19] - 2026-02-04

### Added
- **PC版長押し削除対応**
  - デスクトップブラウザでセッション一覧の長押し削除が動作
  - `onMouseDown`/`onMouseUp`/`onMouseLeave`イベントを追加

### Changed
- **Claude Code検出の改善**
  - macOSとLinux両方で動作するTTYプロセスチェック方式を採用
  - `ps -t`コマンドで`claude`プロセスを直接確認
  - `pane_current_command`フォールバックを削除

### Fixed
- 未定義変数`pts`を`ttyName`に修正（セッションマッチングが失敗していた問題）

### UI
- PC版のアイコンボタンサイズを拡大（w-3 h-3 → w-4 h-4）
- ボタンのイベント伝播を修正

## [0.0.18] - 2026-02-04

### Added
- **ダッシュボードにバージョン表示**
  - CC Hubバージョンを画面下部に表示

### Changed
- **バージョン管理の改善**
  - package.jsonを正とするバージョン管理に変更
  - ハードコードされたVERSION定数を削除

### UI
- モバイル版の下部ナビゲーションバーの高さを増加（タッチターゲット改善）

## [0.0.4] - 2026-02-01

### Added
- **CLI強化**
  - `--help` / `--version` オプション
  - `-p, --port` / `-H, --host` / `-P, --password` オプション
  - `cchub setup` - systemdサービス登録コマンド
  - `cchub update` - 自動更新コマンド（GitHub Releases連携）
  - `cchub status` - サービス状態確認コマンド

- **systemd連携**
  - ユーザーサービスファイル自動生成
  - 自動再起動（Restart=always）
  - 毎日の自動更新チェック（timer）

### Changed
- Tailscale必須化（常にHTTPS）
- 環境変数からCLI引数ベースの設定に変更

### Removed
- 自己署名証明書機能（TLS=1）
- カスタム証明書機能（TLS_CERT/TLS_KEY）
- 環境変数による設定（PORT, HOST, TLS）

## [0.0.3] - 2026-02-01

### Added
- **Dashboard機能**
  - 使用量リミット表示（5時間/7日サイクル）
  - リミット到達予測（現在のペースでの予測時間）
  - 日別使用統計グラフ（メッセージ数・セッション数）
  - モデル別トークン使用量（Opus/Sonnet比較）
  - 推定コスト表示

- **セッション履歴機能**
  - 過去のClaude Codeセッション一覧
  - プロジェクト別グループ化
  - 会話内容の表示
  - セッション再開（`claude -r`）

- **会話ビューア強化**
  - Markdownレンダリング（テーブル、コードブロック対応）
  - 画像表示サポート
  - アクティブセッションの自動更新

- **セッション管理強化**
  - PTY-based session matching（同一ディレクトリでの複数セッション識別）
  - セッション状態インジケーター（処理中/入力待ち/アイドル/完了）
  - セッション再開ボタン

### Fixed
- 同じディレクトリで複数のClaude Codeセッション実行時に情報が混在する問題

## [0.0.2] - 2026-02-01

### Added
- GitHub Releaseへのバイナリ自動アップロード

## [0.0.1] - 2026-01-31

### Added
- 初期リリース
- マルチセッション管理
- タブレット最適化UI
- ファイルビューア
- 変更追跡
- TLS対応（自己署名証明書、Tailscale）
